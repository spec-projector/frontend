<jnt-informer *ngIf="errors.length > 0"
              [placement]="ui.placement.absolute"
              [context]="ui.context.modal"
              (ok)="this.errors = []">
  <jnt-informer-message *ngFor="let e of errors"
                        [message]="e.toString()"></jnt-informer-message>
</jnt-informer>

<jnt-form [formGroup]="form"
          [state]="progress.changing ? ui.state.loading : null"
          (submitted)="changePersonalData()">
  <jnt-stack [align]="ui.align.stretch">
    <jnt-form-item>
      <jnt-form-control name="avatar">
        <jnt-image-uploader formControlName="avatar"
                            [shape]="ui.shape.circle"
                            [uploader]="uploadAvatar()"
                            [image]="me.avatar?.url"
                            valueField="id"
                            urlField="url">
          <ng-template #imageTemplate let-image="image">
            <jnt-avatar [size]="ui.size.large"
                        [image]="image"></jnt-avatar>
          </ng-template>
        </jnt-image-uploader>
      </jnt-form-control>
    </jnt-form-item>
    <jnt-form-item>
      <jnt-form-label>First name</jnt-form-label>
      <jnt-form-control name="firstName"
                        i81n-name="@@label.first_name">
        <jnt-input formControlName="firstName"
                   placeholder="First name"
                   i18n-placeholder="@@label.first_name"></jnt-input>
        <jnt-form-message [validator]="ui.validator.required"
                          i18n="@@message.field_required">This field is required
        </jnt-form-message>
      </jnt-form-control>
    </jnt-form-item>
    <jnt-form-item>
      <jnt-form-label>Last name</jnt-form-label>
      <jnt-form-control name="lastName"
                        i81n-name="@@label.last_name">
        <jnt-input formControlName="lastName"
                   placeholder="Last name"
                   i18n-placeholder="@@label.last_name"></jnt-input>
        <jnt-form-message [validator]="ui.validator.required"
                          i18n="@@message.field_required">This field is required
        </jnt-form-message>
      </jnt-form-control>
    </jnt-form-item>
  </jnt-stack>

  <ng-template #formFooterTemplate>
    <jnt-button text="Save"
                i18n-text="@@action.save"
                [icon]="ui.icons.save"
                [width]="ui.width.fluid"
                [type]="ui.button.type.submit">
    </jnt-button>
  </ng-template>

</jnt-form>
