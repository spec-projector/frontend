<jnt-app-page-header [icon]="localUi.icons.features"
                     title="Features"
                     teaser="functionality of your application"></jnt-app-page-header>

<p>Your app is a game with actors each of them wants to do something for reaching some goal.</p>

<jnt-stack [align]="ui.align.stretch"
           [gutter]="ui.gutter.large">
  <jnt-collapsible data-library title="Library">
    <ng-template #collapsibleContentTemplate>
      <p>Epics</p>
      <ul data-epics cdkDropList [cdkDropListConnectedTo]="spec | features">
        <li cdkDrag *ngFor="let epic of spec.epics"
            [cdkDragData]="{id: epic.id}">
          {{epic.title}}
        </li>
      </ul>
    </ng-template>
  </jnt-collapsible>

  <jnt-stack [orientation]="ui.orientation.horizontal">
    <jnt-button *ngIf="manager.mode ==  editMode.edit"
                [icon]="ui.icons.add"
                [shape]="ui.shape.circle"
                (click)="addActor()"></jnt-button>
  </jnt-stack>

  <jnt-stack cdkDropList [align]="ui.align.stretch"
             (cdkDropListDropped)="moveActor($event)"
             [cdkDropListData]="spec?.actors">
    <jnt-block cdkDrag *ngFor="let actor of spec?.actors; let i = index; trackBy: trackActor">
      <jnt-stack [orientation]="ui.orientation.horizontal">
        <jnt-stack data-actions *ngIf="manager.mode ==  editMode.edit"
                   [gutter]="ui.gutter.small">
          <jnt-button cdkDragHandle
                      [icon]="ui.icons.expand"
                      [size]="ui.size.tiny"
                      [shape]="ui.shape.circle"
                      [scheme]="ui.scheme.secondary">
          </jnt-button>
          <jnt-button [icon]="ui.icons.cancel"
                      [size]="ui.size.tiny"
                      [shape]="ui.shape.circle"
                      [scheme]="ui.scheme.secondary"
                      [jntPopover]="{contentTemplate: deleteTemplate, trigger: ui.trigger.click}"
                      (attached)="instance.popover = $event">
          </jnt-button>
          <ng-template #deleteTemplate>
            <jnt-confirm message="Are you sure to delete the actor?"
                         (cancel)="instance.popover.hide()"
                         (ok)="deleteActor(i);instance.popover.hide()"></jnt-confirm>
          </ng-template>
        </jnt-stack>
        <spec-actor data-actor [actor]="actor"></spec-actor>
      </jnt-stack>
    </jnt-block>
  </jnt-stack>
</jnt-stack>

