<ng-template #tokenTemplate>
  <jnt-form [formGroup]="form"
            [state]="progress.saving ? ui.state.loading : null"
            (submitted)="save()">
    <jnt-row [align]="ui.align.end">
      <jnt-col [tablet]="8">
        <jnt-form-item formGroupName="figmaIntegration">
          <jnt-form-label i18n="@@label.figma_key">Figma key</jnt-form-label>
          <jnt-form-control name="token">
            <jnt-input formControlName="token"
                       placeholder="xxxxx-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"></jnt-input>
            <jnt-form-message [validator]="ui.validator.required"
                              i18n="@@message.field_is_required">Field is required
            </jnt-form-message>
          </jnt-form-control>
        </jnt-form-item>
      </jnt-col>
      <jnt-col [tablet]="4">
        <jnt-button [type]="ui.button.type.submit"
                    text="Save"
                    i18n-text="@@action.save"
                    [width]="ui.width.fluid"
                    [icon]="ui.icons.save"
                    [analytics]="{ type: analyticsType.goal, goal: 'featureFigmaTokenSave' }"></jnt-button>
      </jnt-col>
    </jnt-row>
  </jnt-form>
</ng-template>

<jnt-message [scheme]="ui.scheme.secondary">
  <ng-container [ngSwitch]="consts.language">
    <ng-container *ngSwitchDefault>
      <p>For <b>Figma</b> integration, please, follow with steps:</p>
      <jnt-timeline>
        <jnt-timeline-item title="Get Figma API token">
          <ng-template #timelineItemContentTemplate>
            <p>Go to your profile settings</p>
            <img data-figma1 width="725" height="327" src="assets/images/figma/figma1.png">
            <p>Make a new token with name <b>sp</b> and copy to clipboard</p>
            <img data-figma2 width="640" height="625" src="assets/images/figma/figma2.png">
          </ng-template>
        </jnt-timeline-item>
        <jnt-timeline-item title="Insert token on the form">
          <ng-template #timelineItemContentTemplate>
            <ng-container *ngTemplateOutlet="tokenTemplate"></ng-container>
          </ng-template>
        </jnt-timeline-item>
      </jnt-timeline>
    </ng-container>
    <ng-container *ngSwitchCase="language.ru">
      <p>Для настройки интеграции с <b>Figma</b> пожалуйста, выполните следующие шаги:</p>
      <jnt-timeline>
        <jnt-timeline-item title="Получите Figma API ключ">
          <ng-template #timelineItemContentTemplate>
            <p>Зайдите в настройки Вашего профиля</p>
            <img data-figma1 width="725" height="327" src="assets/images/figma/figma1.png">
            <p>Создайте новый ключ с именем <b>sp</b> и скопируйте его в буфер обмена</p>
            <img data-figma2 width="640" height="625" src="assets/images/figma/figma2.png">
          </ng-template>
        </jnt-timeline-item>
        <jnt-timeline-item title="Вставьте ключ в поле ниже">
          <ng-template #timelineItemContentTemplate>
            <ng-container *ngTemplateOutlet="tokenTemplate"></ng-container>
          </ng-template>
        </jnt-timeline-item>
      </jnt-timeline>
    </ng-container>
  </ng-container>
</jnt-message>
